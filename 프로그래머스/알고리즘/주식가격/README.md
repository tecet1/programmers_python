
## ë¬¸ì œë§í¬
[ë‹¤ë¦¬ë¥¼ ì§€ë‚˜ëŠ” íŠ¸ëŸ­](https://school.programmers.co.kr/learn/courses/30/lessons/42583)
## ì²«ë²ˆì§¸ ì‹œë„
```
def solution(prices):
    '''
    answer = [time]
    stack = [index, time_added, price]
    answer[index] = time - time_added
    ê·¼ë° time_addedëŠ” ì–´ì°¨í”¼ index+1ì¸ë° êµ³ì´ ë”°ë¡œ ë³€ìˆ˜í™” í•  í•„ìš”ê°€ ìˆë‚˜?
    
    stack = [index, price]
    answer[index] = time - (index + 1)
    
    <stack adding phase>
    stack = [[0,prices[0]]]
    for i in range(len(prices)):
        highest_price = stack[-1][1]
        current_price = prices[i]
        if highest_price > current_price:
            state = stack.pop()
            index = state[0]
            answer[i] = (i + 1) - (index + 1)
        stack.append([i,prices[i]])
    
    <handling leftover phase>
    while stack:
        state = stack.pop()
        index = state[0]
        answer[i] = (i + 1) - (index + 1)
    
    '''
    answer = [0 for i in range(len(prices))]
    stack = []
    for i in range(1, len(prices)):
        highest_price = stack[-1][1]
        current_price = prices[i]
        if highest_price > current_price:
            state = stack.pop()
            index = state[0]
            answer[i] = (i + 1) - (index + 1)
        stack.append([i,prices[i]])
    
    while stack:
        state = stack.pop()
        index = state[0]
        answer[index] = (len(prices)) - (index + 1)
    
    return answer
```
30ë¶„ì •ë„ ì¨ì„œ ì´ˆì•ˆìœ¼ë¡œ ì‘ì„±í•œ ì½”ë“œì´ì§€ë§Œ, ì˜ëª»ëœ ë‹µì•ˆì„ ì œì¶œí–ˆë‹¤. AIì— ë¬¼ì–´ë³¸ ê²°ê³¼, 2ê°€ì§€ ë¬¸ì œê°€ ìˆë‹¤ëŠ” ì§„ë‹¨ì„ ë°›ì•˜ë‹¤.
## ë¬¸ì œì 
ì‘ì„±í•˜ì‹  ì½”ë“œë¥¼ ë³´ë‹ˆ ì£¼ì‹ ê°€ê²©ì˜ í•˜ë½ì´ ë°œìƒí•˜ì§€ ì•Šì€ ê¸°ê°„ì„ ê³„ì‚°í•˜ëŠ” ë¬¸ì œ, ì¦‰ **ì£¼ì‹ ê°€ê²© ë¬¸ì œ (Price Drops Problem)**ë¥¼ **ìŠ¤íƒ(Stack)**ì„ ì´ìš©í•˜ì—¬ í•´ê²°í•˜ë ¤ê³  ì‹œë„í•˜ì…¨ìŠµë‹ˆë‹¤. ì´ëŠ” ì´ ë¬¸ì œì— ê°€ì¥ ì í•©í•œ íš¨ìœ¨ì ì¸ ì•Œê³ ë¦¬ì¦˜ ì ‘ê·¼ ë°©ì‹ì…ë‹ˆë‹¤.

## ğŸ§ ì‘ì„±í•˜ì‹  ì½”ë“œ ë¶„ì„ ë° ë…¼ë¦¬ ì˜¤ë¥˜ ì§€ì 

ì‘ì„±í•˜ì‹  ì½”ë“œì˜ ê¸°ë³¸ì ì¸ ì ‘ê·¼ ë°©ì‹ì€ í›Œë¥­í•˜ì§€ë§Œ, **í•µì‹¬ ë…¼ë¦¬ì—ì„œ ë‘ ê°€ì§€ ì˜¤ë¥˜**ê°€ ë°œê²¬ë©ë‹ˆë‹¤.

### âŒ ì˜¤ë¥˜ 1: `highest_price` ë³€ìˆ˜ì˜ ë¬¸ì œ

ë°˜ë³µë¬¸ ì•ˆì—ì„œ `highest_price = stack[-1][1]`ë¡œ ê°€ì¥ ë§ˆì§€ë§‰ì— ìŠ¤íƒì— ë“¤ì–´ì˜¨ ê°€ê²©(ìµœìƒë‹¨)ë§Œì„ ë¹„êµí•˜ê³  ìˆìŠµë‹ˆë‹¤.

Python

```
# í˜„ì¬ ì½”ë“œ:
highest_price = stack[-1][1] # ìŠ¤íƒ ë§¨ ìœ„ì˜ ê°€ê²©ë§Œ ë¹„êµ
current_price = prices[i]
if highest_price > current_price: # ë§¨ ìœ„ì˜ ê°€ê²©ë³´ë‹¤ í˜„ì¬ ê°€ê²©ì´ ë‚®ë‹¤ë©´
    # ... pop ë¡œì§ ì‹¤í–‰

```

**ë¬¸ì œì :** ìŠ¤íƒì—ëŠ” ê°€ê²©ì´ í•˜ë½í•˜ëŠ” ì‹œì ê¹Œì§€ ê¸°ë‹¤ë¦¬ê³  ìˆëŠ” ì—¬ëŸ¬ ê°œì˜ ì´ì „ ê°€ê²©ë“¤ì´ ë“¤ì–´ ìˆìŠµë‹ˆë‹¤. í˜„ì¬ ê°€ê²©(`current_price`)ì´ ìŠ¤íƒì˜ ë§¨ ìœ„ ê°€ê²©(`highest_price`)ë³´ë‹¤ ë‚®ì§€ ì•Šë”ë¼ë„, ê·¸ **ì•„ë˜ì— ìˆëŠ” ê°€ê²©ë“¤**ë³´ë‹¤ ë‚®ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

**ì˜¬ë°”ë¥¸ ë¡œì§:** `while` ë¬¸ì„ ì‚¬ìš©í•˜ì—¬ í˜„ì¬ ê°€ê²©ì´ **ìŠ¤íƒì˜ ìµœìƒë‹¨ ê°€ê²©ë³´ë‹¤ ë‚®ì•„ì§€ëŠ” ë™ì•ˆ** ê³„ì† `pop`ì„ ìˆ˜í–‰í•˜ê³  `answer`ë¥¼ ì—…ë°ì´íŠ¸í•´ì•¼ í•©ë‹ˆë‹¤.

### âŒ ì˜¤ë¥˜ 2: `answer` ì—…ë°ì´íŠ¸ì˜ ì¸ë±ìŠ¤ ì˜¤ë¥˜

í•˜ë½ì´ ë°œìƒí•˜ì—¬ ìŠ¤íƒì—ì„œ ê°€ê²©ì„ `pop()`í•  ë•Œ, `answer`ë¥¼ ì—…ë°ì´íŠ¸í•˜ëŠ” ë¶€ë¶„ì—ì„œ **í˜„ì¬ ì‹œì ì˜ ì¸ë±ìŠ¤ (`i`)**ê°€ ì•„ë‹Œ **í•˜ë½ì´ ë°œìƒí•œ ê°€ê²©ì˜ ì›ë˜ ì¸ë±ìŠ¤ (`index`)**ë¥¼ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤.

Python

```
# í˜„ì¬ ì½”ë“œ:
state = stack.pop()
index = state[0]
answer[i] = (i + 1) - (index + 1) # <--- answer[i]ì— ê°’ì„ ë„£ëŠ” ì˜¤ë¥˜

```

**ë¬¸ì œì :** `answer[i]`ëŠ” í˜„ì¬ ê°€ê²© `prices[i]`ê°€ ë–¨ì–´ì§€ì§€ ì•Šê³  **ìœ ì§€ëœ ê¸°ê°„**ì„ ê³„ì‚°í•˜ëŠ” ê³³ì…ë‹ˆë‹¤. í•˜ì§€ë§Œ ì§€ê¸ˆ ê³„ì‚°í•˜ë ¤ëŠ” ê°’ì€ ìŠ¤íƒì—ì„œ `pop`ëœ **ê³¼ê±° ê°€ê²© `prices[index]`ê°€ ê°€ê²© í•˜ë½ì„ ê²½í—˜í•œ ê¸°ê°„**ì…ë‹ˆë‹¤.

**ì˜¬ë°”ë¥¸ ë¡œì§:**

$$\text{answer}[index] = (\text{í˜„ì¬ ì‹œì  ì¸ë±ìŠ¤ } i) - (\text{ê³¼ê±° ê°€ê²©ì˜ ì¸ë±ìŠ¤ } index)$$

`i`ëŠ” `prices[index]`ì˜ ê°€ê²©ì´ í•˜ë½í•˜ê¸° ì‹œì‘í•œ **ì‹œì ì˜ ì¸ë±ìŠ¤**ì´ë¯€ë¡œ, `answer[index]`ì— ì´ ê¸°ê°„ì„ ì €ì¥í•´ì•¼ í•©ë‹ˆë‹¤.

## ğŸŒŸ ìŠ¤íƒì„ í™œìš©í•œ ì˜¬ë°”ë¥¸ í’€ì´ (ë‹¨ì¡° ê°ì†Œ ìŠ¤íƒ)

ì´ ë¬¸ì œë¥¼ í’€ê¸° ìœ„í•´ ì‚¬ìš©í•˜ëŠ” ìŠ¤íƒì„ **ë‹¨ì¡° ê°ì†Œ ìŠ¤íƒ (Monotonic Decreasing Stack)**ì´ë¼ê³  ë¶€ë¦…ë‹ˆë‹¤. ìŠ¤íƒì—ëŠ” **ì¸ë±ìŠ¤**ë§Œ ì €ì¥í•˜ë©°, í•­ìƒ **ìŠ¤íƒì— ì €ì¥ëœ ì¸ë±ìŠ¤ì— í•´ë‹¹í•˜ëŠ” ê°€ê²©ì€ ê°ì†Œí•˜ëŠ” ìˆœì„œ**ë¥¼ ìœ ì§€í•˜ë„ë¡ ì„¤ê³„í•©ë‹ˆë‹¤.

## ìˆ˜ì •ëœ ì½”ë“œ
```
def solution(prices):
    n = len(prices)
    answer = [0] * n
    # ìŠ¤íƒì—ëŠ” (ê°€ê²©ì´ ë–¨ì–´ì§€ì§€ ì•Šê³  ìˆëŠ”) ì£¼ì‹ ê°€ê²©ì˜ ì¸ë±ìŠ¤ë§Œ ì €ì¥í•©ë‹ˆë‹¤.
    stack = []  
    
    for i in range(n):
        current_price = prices[i]
        
        # 1. ê°€ê²© í•˜ë½ ì‹œì  ì²˜ë¦¬ (Monotonic Decreasing Stack ìœ ì§€)
        # ìŠ¤íƒì´ ë¹„ì–´ìˆì§€ ì•Šê³ , í˜„ì¬ ê°€ê²©ì´ ìŠ¤íƒì˜ ë§¨ ìœ„ ì¸ë±ìŠ¤ì— í•´ë‹¹í•˜ëŠ” ê°€ê²©ë³´ë‹¤ ë‚®ë‹¤ë©´:
        while stack and prices[stack[-1]] > current_price:
            # í•˜ë½ì´ ë°œìƒí•œ ê³¼ê±° ê°€ê²©ì˜ ì¸ë±ìŠ¤
            j = stack.pop() 
            
            # answer[j]: prices[j]ì˜ ê°€ê²©ì´ í•˜ë½í•˜ê¸°ê¹Œì§€ ê±¸ë¦° ì‹œê°„
            # ê¸°ê°„ = (í•˜ë½ì´ ë°œìƒí•œ í˜„ì¬ ì‹œì  i) - (ê³¼ê±° ê°€ê²©ì˜ ì‹œì‘ ì‹œì  j)
            answer[j] = i - j  
        
        # í˜„ì¬ ì¸ë±ìŠ¤ë¥¼ ìŠ¤íƒì— ì¶”ê°€
        stack.append(i)
        
    # 2. ìŠ¤íƒì— ë‚¨ì•„ìˆëŠ” ì¸ë±ìŠ¤ ì²˜ë¦¬ (ëê¹Œì§€ ê°€ê²©ì´ ë–¨ì–´ì§€ì§€ ì•Šì€ ê²½ìš°)
    # ìŠ¤íƒì— ë‚¨ì•„ìˆëŠ” ì¸ë±ìŠ¤ jëŠ” ë§ˆì§€ë§‰ ì‹œì (n-1)ê¹Œì§€ ê°€ê²© í•˜ë½ì´ ì—†ì—ˆë‹¤ëŠ” ì˜ë¯¸
    while stack:
        j = stack.pop()
        
        # ê¸°ê°„ = (ë§ˆì§€ë§‰ ì‹œì  ì¸ë±ìŠ¤ n-1) - (ê³¼ê±° ê°€ê²©ì˜ ì‹œì‘ ì‹œì  j)
        answer[j] = (n - 1) - j
        
    return answer

# ì˜ˆì‹œ: prices = [1, 2, 3, 2, 3]
# answer: [4, 3, 1, 1, 0]
```

## ë¶„ì„
### ë¡œì§
ì´ëŸ° ìŠ¤íƒì„ 'ë‹¨ì¡° ê°ì†Œ ìŠ¤íƒ(Monotonic Decreasing Stack)'ì´ë¼ê³  ë¶€ë¥¸ë‹¤ê³  í•œë‹¤. ìŠ¤íƒì€ ì¸ë±ìŠ¤ë§Œ ì €ì¥í•˜ê³ , ì‹¤ì œ ê³„ì‚°ê³¼ì •ì—ì„œëŠ” ìŠ¤íƒì„ ì§ì ‘ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ì €ì¥ëœ ì¸ë±ìŠ¤ê°€ ê°€ë¦¬í‚¤ëŠ” ì£¼ì†Œë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ë‹¤.

### ë¬¸ë²•
í•´ë‹¹ì‚¬í•­ ì—†ìŒ

> Written with [StackEdit](https://stackedit.io/).